
<!-- Media Generation Sidebar -->
<!-- This template can be included in other templates or used as a standalone page -->
<!-- To include: {% include 'sidebar-media.html' %} -->
<!-- To extend: {% extends 'base.html' %} and use {% block content %} -->

{% extends 'base.html' %}

{% block title %}Media Generator - GEM Enterprise{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Main Content Area -->
        <div class="col-lg-8">
            <div class="page-header">
                <div class="container">
                    <h1><i class="fas fa-magic me-2"></i>AI Media Generator</h1>
                    <p class="lead">Generate professional images, videos, and voice content for your projects</p>
                </div>
            </div>
            
            <!-- Generated Content Preview Area -->
            <div class="container mt-4">
                <div class="content-card">
                    <h3><i class="fas fa-eye me-2"></i>Generated Content Preview</h3>
                    <div id="preview-area" class="mt-3">
                        <div class="text-center text-muted">
                            <i class="fas fa-image fa-3x mb-3"></i>
                            <p>Generated content will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sidebar Media Controls -->
        <div class="col-lg-4">
            <div class="sticky-top" style="top: 100px;">
                
                <!-- Image Generation Section -->
                <div class="service-card mb-4">
                    <div class="service-header">
                        <i class="fas fa-image text-primary"></i>
                        <h4>Generate Image</h4>
                    </div>
                    <form id="image-form" class="media-form">
                        <div class="mb-3">
                            <label for="image-prompt" class="form-label">Image Prompt</label>
                            <textarea class="form-control" id="image-prompt" name="prompt" rows="3" 
                                    placeholder="Describe the image you want to generate..." required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="image-style" class="form-label">Style</label>
                            <select class="form-select" id="image-style" name="style">
                                <option value="realistic">Realistic</option>
                                <option value="artistic">Artistic</option>
                                <option value="professional">Professional</option>
                                <option value="cartoon">Cartoon</option>
                                <option value="abstract">Abstract</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="image-size" class="form-label">Size</label>
                            <select class="form-select" id="image-size" name="size">
                                <option value="1024x1024">Square (1024x1024)</option>
                                <option value="1792x1024">Landscape (1792x1024)</option>
                                <option value="1024x1792">Portrait (1024x1792)</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-magic me-2"></i>Generate Image
                        </button>
                        <div class="mt-2">
                            <div id="image-status" class="text-muted small"></div>
                            <div id="image-snippet-path" class="text-success small mt-1" style="display: none;"></div>
                        </div>
                    </form>
                </div>

                <!-- Video Generation Section -->
                <div class="service-card mb-4">
                    <div class="service-header">
                        <i class="fas fa-video text-success"></i>
                        <h4>Generate Video</h4>
                    </div>
                    <form id="video-form" class="media-form">
                        <div class="mb-3">
                            <label for="video-prompt" class="form-label">Video Prompt</label>
                            <textarea class="form-control" id="video-prompt" name="prompt" rows="3" 
                                    placeholder="Describe the video scene you want to create..." required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="video-duration" class="form-label">Duration</label>
                            <select class="form-select" id="video-duration" name="duration">
                                <option value="5">5 seconds</option>
                                <option value="10" selected>10 seconds</option>
                                <option value="15">15 seconds</option>
                                <option value="30">30 seconds</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="video-quality" class="form-label">Quality</label>
                            <select class="form-select" id="video-quality" name="quality">
                                <option value="standard">Standard</option>
                                <option value="high" selected>High</option>
                                <option value="premium">Premium</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-success w-100">
                            <i class="fas fa-play me-2"></i>Generate Video
                        </button>
                        <div class="mt-2">
                            <div id="video-status" class="text-muted small"></div>
                            <div id="video-snippet-path" class="text-success small mt-1" style="display: none;"></div>
                        </div>
                    </form>
                </div>

                <!-- Text-to-Speech Section -->
                <div class="service-card mb-4">
                    <div class="service-header">
                        <i class="fas fa-microphone text-info"></i>
                        <h4>Synthesize Voice</h4>
                    </div>
                    <form id="tts-form" class="media-form">
                        <div class="mb-3">
                            <label for="tts-text" class="form-label">Text to Speak</label>
                            <textarea class="form-control" id="tts-text" name="text" rows="4" 
                                    placeholder="Enter the text you want to convert to speech..." required></textarea>
                            <div class="form-text">Maximum 500 characters</div>
                        </div>
                        <div class="mb-3">
                            <label for="tts-voice" class="form-label">Voice</label>
                            <select class="form-select" id="tts-voice" name="voice">
                                <option value="professional-male">Professional Male</option>
                                <option value="professional-female" selected>Professional Female</option>
                                <option value="friendly-male">Friendly Male</option>
                                <option value="friendly-female">Friendly Female</option>
                                <option value="narrator">Narrator</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="tts-speed" class="form-label">Speed</label>
                            <select class="form-select" id="tts-speed" name="speed">
                                <option value="0.8">Slow</option>
                                <option value="1.0" selected>Normal</option>
                                <option value="1.2">Fast</option>
                                <option value="1.5">Very Fast</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-info w-100">
                            <i class="fas fa-volume-up me-2"></i>Generate Voice
                        </button>
                        <div class="mt-2">
                            <div id="tts-status" class="text-muted small"></div>
                            <div id="tts-snippet-path" class="text-success small mt-1" style="display: none;"></div>
                        </div>
                    </form>
                </div>

                <!-- Generated Assets History -->
                <div class="service-card">
                    <div class="service-header">
                        <i class="fas fa-history text-warning"></i>
                        <h4>Recent Assets</h4>
                    </div>
                    <div id="assets-history" class="assets-list">
                        <div class="text-center text-muted">
                            <i class="fas fa-folder-open fa-2x mb-2"></i>
                            <p class="small">Generated assets will appear here</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Loading Modal -->
<div class="modal fade" id="loadingModal" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content bg-dark">
            <div class="modal-body text-center py-4">
                <div class="spinner-border text-primary mb-3" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mb-0">Generating content...</p>
                <small class="text-muted" id="loading-message">Please wait</small>
            </div>
        </div>
    </div>
</div>

<!-- Custom Styles for Media Sidebar -->
<style>
.media-form {
    background: var(--bg-card);
    border-radius: 8px;
    padding: 0;
}

.service-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
}

.service-header i {
    font-size: 1.5rem;
}

.service-header h4 {
    margin: 0;
    color: var(--text-primary);
}

.assets-list {
    max-height: 300px;
    overflow-y: auto;
}

.asset-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 0.5rem;
    background: var(--bg-card-hover);
    transition: all 0.3s ease;
}

.asset-item:hover {
    border-color: var(--primary-color);
    transform: translateX(2px);
}

.asset-preview {
    width: 40px;
    height: 40px;
    border-radius: 6px;
    object-fit: cover;
    flex-shrink: 0;
}

.asset-info {
    flex: 1;
    min-width: 0;
}

.asset-name {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.asset-type {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.asset-actions {
    display: flex;
    gap: 0.25rem;
}

.asset-actions .btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
}

#preview-area.has-content {
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.preview-content {
    max-width: 100%;
    max-height: 400px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.form-text {
    font-size: 0.8rem;
    color: var(--text-muted);
}

@media (max-width: 991.98px) {
    .sticky-top {
        position: static !important;
    }
    
    .col-lg-4 {
        margin-top: 2rem;
    }
}
</style>

<!-- JavaScript Integration -->
<script>
// This script will be enhanced by sidebar-media.js
// Basic form validation and UI feedback
document.addEventListener('DOMContentLoaded', function() {
    // Character counter for TTS text
    const ttsTextarea = document.getElementById('tts-text');
    if (ttsTextarea) {
        ttsTextarea.addEventListener('input', function() {
            const current = this.value.length;
            const max = 500;
            const formText = this.parentNode.querySelector('.form-text');
            if (formText) {
                formText.textContent = `${current}/${max} characters`;
                if (current > max) {
                    formText.classList.add('text-danger');
                } else {
                    formText.classList.remove('text-danger');
                }
            }
        });
    }
    
    // Form submission prevention until sidebar-media.js loads
    document.querySelectorAll('.media-form').forEach(form => {
        form.addEventListener('submit', function(e) {
            if (typeof handleMediaGeneration === 'undefined') {
                e.preventDefault();
                alert('Media generation system is loading. Please try again in a moment.');
            }
        });
    });
});
</script>

{% endblock %}
